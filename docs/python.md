# Python開発設定

## 開発環境
- Python: 3.10.17
- 依存関係管理: requirements.txt

## 開発ルール
- コードスタイル: PEP 8準拠
- 型ヒント: 必須
- ドキュメント: 日本語で記述
- エラーハンドリング: 適切な例外処理

## デバッグ設定
- ログレベル: INFO
- デバッグ出力: 検索結果の詳細表示
- エラーメッセージ: 日本語で表示

## エラーハンドリング
- タイムアウト設定:
  - 接続タイムアウト: 5秒
  - 読み取りタイムアウト: 30秒
- リトライ設定:
  - 最大リトライ回数: 3回
  - リトライ間隔: 1秒

## 運用ルール
- データベースバックアップ: 定期的に実施
- インデックス再構築: 必要に応じて実施
- エラー発生時: ログを確認し、適切な対応を実施

## インデックス管理の実装方針
### 基本方針
- FAISSインデックスとSQLiteデータベースの2つのデータストアを使用
- インデックス位置で両者を紐付ける
- トランザクション管理による整合性の確保
- 1人の人物に対して複数の顔画像を登録可能（一対多の関係）
- 同一画像の重複登録は防止

### 整合性管理
- トランザクションによる原子性の確保
- 画像パスによる重複チェック
- 整合性チェックは行わない（将来的なデータ量増加と一対多の関係を考慮）

### エラーハンドリング
- 例外処理の徹底
- ロールバック処理の確実な実行
- エラーメッセージの明確な出力

### バックアップと復元
- 定期的なデータベースバックアップ
- インデックスファイルのバックアップ
- 整合性を保った復元手順の整備

### パフォーマンス考慮事項
- インデックスのメモリ使用量の監視
- 大量データ処理時の最適化
- 検索パフォーマンスの維持
- 一対多の関係を考慮したインデックス設計 